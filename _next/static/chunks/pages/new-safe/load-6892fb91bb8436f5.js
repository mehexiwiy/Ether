(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479,3892],{73312:(e,s,n)=>{"use strict";n.d(s,{mcf:()=>a.mcf,o5u:()=>a.o5u,xA9:()=>a.xA9});var a=n(30409)},3572:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-safe/load",function(){return n(55693)}])},61759:(e,s,n)=>{"use strict";n.d(s,{A:()=>r});var a=n(57657),t=n(74848);let r=(0,a.A)((0,t.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},80063:(e,s,n)=>{"use strict";n.d(s,{A:()=>v});var a=n(74848),t=n(96540),r=n(49785),l=n(9144),d=n(85511),o=n(47168),i=n(18705),c=n(38878),x=n(73536),h=n(15542),m=n(93829),u=n(83392),p=n.n(u),j=n(98251),f=n.n(j),A=n(74525),y=n(49276);let w=(0,d.Z)({stringify:e=>e.name+" "+e.label}),v=e=>{let{name:s,canAdd:n,...d}=e,u=(0,i.A)(),{setValue:j,control:v}=(0,r.xW)(),_=(0,r.FH)({name:s,control:v}),[g,b]=(0,t.useState)(!1),[S,k]=(0,t.useState)(!1),N=Object.entries(u).map(e=>{let[s,n]=e;return{label:s,name:n}}),C=(0,t.useMemo)(()=>!!N.filter(e=>e.label.includes(_)).length,[N,_]),z=(0,t.useMemo)(()=>N.some(e=>(0,y.xU)(e.label,_)),[N,_]),I=(e,s)=>(0,A.$m)(_)?[]:w(e,s),B=()=>{b(e=>!e)},E=n?()=>{k(!0)}:void 0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.xI,{name:s,control:v,render:e=>{var r;let{field:{ref:i,...h}}=e;return(0,a.jsx)(o.A,{...h,className:f().input,disableClearable:!0,disabled:d.disabled,readOnly:null===(r=d.InputProps)||void 0===r?void 0:r.readOnly,freeSolo:!0,options:N,onChange:(e,s)=>"string"==typeof s?h.onChange(s):h.onChange(s.label),onInputChange:(e,n)=>j(s,n),filterOptions:I,componentsProps:{paper:{elevation:2}},renderOption:(e,s)=>{let{key:n,...r}=e;return(0,t.createElement)(l.o5u,{"data-testid":"address-item",component:"li",variant:"body2",...r,key:n},(0,a.jsx)(x.A,{address:s.label,name:s.name,shortAddress:!1,copyAddress:!1}))},renderInput:e=>(0,a.jsx)(c.A,{"data-testid":"address-item",...e,...d,focused:d.focused||!_,name:s,onOpenListClick:C?B:void 0,isAutocompleteOpen:g,onAddressBookClick:n&&!z?E:void 0})})}}),n&&!z?(0,a.jsxs)(l.o5u,{variant:"body2",className:p().unknownAddress,children:[(0,a.jsx)(l.Ahz,{component:h.A,fontSize:"small"}),(0,a.jsxs)("span",{children:["This is an unknown address. You can"," ",(0,a.jsx)("a",{role:"button",onClick:E,children:"add it to your address book"}),"."]})]}):null,S&&(0,a.jsx)(m.A,{handleClose:()=>k(!1),defaultValues:{name:"",address:_}})]})}},70006:(e,s,n)=>{"use strict";n.d(s,{m:()=>h});var a=n(74848),t=n(96540),r=n(39062),l=n(34470),d=n(36673),o=n.n(d),i=n(30409),c=n(10256);let x=e=>{let{steps:s,initialData:n,initialStep:a,eventCategory:r=c.gN,onClose:l,setWidgetStep:d}=e,[o,i]=(0,t.useState)(a||0),[x,h]=(0,t.useState)(n),m=()=>{i(e=>e+1),d&&d(e=>e+1),(0,c.sx)({category:r,action:p?"Submit":"Next",label:o})},u=0===o,p=o===s.length-1;return{onBack:u?l:e=>{i(e=>e-1),d&&d(e=>e-1),(0,c.sx)({category:r,action:u?"Cancel":"Back",label:o}),e&&h(s=>({...s,...e}))},onSubmit:e=>{if(p){l();return}h(s=>({...s,...e})),m()},setStep:e=>{i(e),d&&d(e)},activeStep:o,stepData:x,firstStep:u,setStepData:h}};function h(e){let[s,n]=(0,t.useState)(l.A.secondary.main),{activeStep:d,onSubmit:c,onBack:h,stepData:m,setStep:u,setStepData:p}=x(e),{steps:j}=e,f=j[d],A=(d+1)/j.length*100;return(0,a.jsxs)(i.ZpM,{className:o().card,children:[(0,a.jsx)(r.A,{className:o().progress,color:s,children:(0,a.jsx)(i.hZv,{color:"inherit",variant:"determinate",value:Math.min(A,100)})}),f.title&&(0,a.jsx)(i.aRn,{title:f.title,subheader:f.subtitle,titleTypographyProps:{variant:"h4"},subheaderTypographyProps:{variant:"body2"},avatar:(0,a.jsx)(i.euF,{className:o().step,children:(0,a.jsx)(i.o5u,{variant:"body2",children:d+1})}),className:o().header}),(0,a.jsx)(i.Wux,{className:o().content,children:f.render(m,c,h,u,n,p)})]})}},44081:(e,s,n)=>{"use strict";n.d(s,{m:()=>y,A:()=>w});var a=n(74848),t=n(96540),r=n(30409),l=n(40017),d=n(28590),o=n(80063),i=n(73544),c=n(49785),x=n(13986),h=n(73536),m=n(43162),u=n(49276),p=n(3107),j=n.n(p),f=n(53373),A=n.n(f);let y=e=>{let{index:s,groupName:n,removable:p=!0,remove:f,readOnly:y=!1}=e,w=(0,m.Ay)(),v="".concat(n,".").concat(s),{control:_,getValues:g,setValue:b}=(0,c.xW)(),S=(0,c.FH)({control:_,name:n}),k=(0,c.FH)({control:_,name:v}),N=(0,t.useMemo)(()=>Array.from({length:S.length},(e,s)=>"".concat(n,".").concat(s)),[S,n]),C=(0,t.useCallback)(async e=>{if(g("owners").filter(s=>(0,u.xU)(s.address,e)).length>1)return"Signer is already added"},[g]),{name:z,ens:I,resolving:B}=(0,x.M)(k.address);(0,t.useEffect)(()=>{z&&!g("".concat(v,".name"))&&b("".concat(v,".name"),z)},[b,g,z,v]),(0,t.useEffect)(()=>{I&&b("".concat(v,".ens"),I)},[I,b,v]);let E=k.address===(null==w?void 0:w.address);return(0,a.jsxs)(r.xA9,{container:!0,spacing:3,className:A()({[j().helper]:E}),sx:{alignItems:"center",marginBottom:3,flexWrap:["wrap",void 0,"nowrap"]},children:[(0,a.jsx)(r.xA9,{item:!0,xs:12,md:y?5:4,children:(0,a.jsx)(r.MJN,{fullWidth:!0,children:(0,a.jsx)(l.A,{"data-testid":"owner-name",name:"".concat(v,".name"),label:"Signer name",InputLabelProps:{shrink:!0},placeholder:I||"Signer ".concat(s+1),helperText:E&&"Your connected wallet",InputProps:{endAdornment:B?(0,a.jsx)(d.A,{position:"end",children:(0,a.jsx)(r.PaH,{size:20})}):null}})})}),(0,a.jsx)(r.xA9,{item:!0,xs:11,md:7,children:y?(0,a.jsx)(r.o5u,{variant:"body2",component:"div",children:(0,a.jsx)(h.A,{address:k.address,shortAddress:!0,hasExplorer:!0,showCopyButton:!0})}):(0,a.jsx)(r.MJN,{fullWidth:!0,children:(0,a.jsx)(o.A,{name:"".concat(v,".address"),label:"Signer",validate:C,deps:N})})}),!y&&(0,a.jsx)(r.xA9,{item:!0,xs:1,sx:{ml:-2,alignSelf:"stretch",display:"flex",alignItems:"center",flexShrink:0},children:p&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.K0,{"data-testid":"remove-owner-btn",onClick:()=>null==f?void 0:f(s),"aria-label":"Remove signer",children:(0,a.jsx)(r.Ahz,{component:i.A,inheritViewBox:!0})})})})]})},w=y},38885:(e,s,n)=>{"use strict";n.d(s,{A:()=>r});var a=n(74848);n(96540);var t=n(54341);let r=e=>{let{name:s,value:n}=e;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(t.xA9,{item:!0,xs:3,children:(0,a.jsx)(t.o5u,{variant:"body2",children:s})}),(0,a.jsx)(t.xA9,{item:!0,xs:s?9:12,children:n})]})}},55693:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>Y});var a=n(74848),t=n(13368),r=n.n(t),l=n(86715),d=n(96540),o=n(10256),i=n(73312),c=n(70006),x=n(49785),h=n(30409),m=n(50704),u=n.n(m),p=n(40017),j=n(15542),f=n(55122),A=n.n(f),y=n(8657),w=n(7484),v=n(13986),_=n(61759),g=n(38878),b=n(8442),S=n(83936),k=n(65605),N=n(75210),C=n(95347),z=n(80429),I=n(91106),B=n.n(I),E=function(e){return e.name="name",e.address="address",e}(E||{});let O=e=>{var s;let{data:n,onSubmit:t,onBack:r}=e,l=(0,S.Ay)(),d=(0,k.GV)(e=>(0,N.hM)(e,l)),i=(0,x.mN)({mode:"all",defaultValues:{name:n.name,address:n.address}}),{handleSubmit:c,formState:{errors:m,isValid:f},watch:I,getValues:E}=i,O=I("address"),P=(0,w.qH)(),{ens:M,name:J,resolving:F}=(0,v.M)(O),R=J||M||P,H=async e=>{if(d&&Object.keys(d).includes(e))return"Safe Account is already added";try{await (0,b.getSafeInfo)(l,e)}catch(e){return"Address given is not a valid Safe Account address"}},L=c(e=>{t({...e,name:e.name||R}),e.name&&(0,o.sx)(o.rR.NAME_SAFE)});return(0,a.jsx)(x.Op,{...i,children:(0,a.jsxs)("form",{onSubmit:L,children:[(0,a.jsxs)(h.azJ,{className:u().row,children:[(0,a.jsxs)(h.xA9,{container:!0,spacing:[3,1],sx:{mb:3,pr:"40px"},children:[(0,a.jsx)(h.xA9,{item:!0,xs:12,md:!0,children:(0,a.jsx)(p.A,{name:"name",label:(null==m?void 0:null===(s=m.name)||void 0===s?void 0:s.message)||"Name",placeholder:R,InputLabelProps:{shrink:!0},InputProps:{endAdornment:F?(0,a.jsx)(h.jC1,{position:"end",children:(0,a.jsx)(h.PaH,{size:20})}):(0,a.jsx)(h.m_M,{title:"This name is stored locally and will never be shared with us or any third parties.",arrow:!0,placement:"top",children:(0,a.jsx)(h.jC1,{position:"end",children:(0,a.jsx)(h.Ahz,{component:j.A,inheritViewBox:!0})})})}})}),(0,a.jsx)(h.xA9,{item:!0,sx:{order:[-1,1]},children:(0,a.jsx)(h.azJ,{className:A().select,children:(0,a.jsx)(y.A,{})})})]}),(0,a.jsx)(g.A,{"data-testid":"address-section",label:"Safe Account",validate:H,name:"address"}),(0,a.jsxs)(h.o5u,{sx:{mt:4},children:["By continuing you consent to the"," ",(0,a.jsx)(B(),{href:C.S.terms,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(z.A,{children:"terms of use"})})," ","and"," ",(0,a.jsx)(B(),{href:C.S.privacy,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(z.A,{children:"privacy policy"})}),"."]})]}),(0,a.jsx)(h.cGx,{}),(0,a.jsx)(h.azJ,{className:u().row,children:(0,a.jsxs)(h.azJ,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3},children:[(0,a.jsx)(h.$nd,{variant:"outlined",size:"small",onClick:()=>{let e=E();r({...e,name:e.name||R})},startIcon:(0,a.jsx)(_.A,{fontSize:"small"}),children:"Back"}),(0,a.jsx)(h.$nd,{"data-testid":"load-safe-next-btn",type:"submit",variant:"contained",size:"stretched",disabled:!f,children:"Next"})]})})]})})};var P=n(56680),M=n(44081),J=function(e){return e.owners="owners",e.threshold="threshold",e}(J||{});let F=e=>{let{data:s,onSubmit:n,onBack:t}=e,r=(0,S.Ay)(),l=(0,x.mN)({defaultValues:s,mode:"onChange"}),{handleSubmit:o,setValue:i,control:c,formState:{isValid:m},getValues:p}=l,{fields:j}=(0,x.jz)({control:c,name:"owners"}),[f]=(0,P.A)(()=>{if(s.address)return(0,b.getSafeInfo)(r,s.address)},[r,s.address]);return(0,d.useEffect)(()=>{f&&(i("threshold",f.threshold),i("owners",f.owners.map((e,s)=>({address:e.value,name:p("owners.".concat(s,".name"))||""}))))},[p,f,i]),(0,a.jsx)(x.Op,{...l,children:(0,a.jsxs)("form",{onSubmit:o(n),children:[(0,a.jsx)(h.azJ,{className:u().row,children:j.map((e,s)=>(0,a.jsx)(M.m,{index:s,groupName:"owners",readOnly:!0},e.id))}),(0,a.jsx)(h.cGx,{}),(0,a.jsx)(h.azJ,{className:u().row,children:(0,a.jsxs)(h.azJ,{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3,children:[(0,a.jsx)(h.$nd,{variant:"outlined",size:"small",onClick:()=>{t(p())},startIcon:(0,a.jsx)(_.A,{fontSize:"small"}),children:"Back"}),(0,a.jsx)(h.$nd,{type:"submit",variant:"contained",size:"stretched",disabled:!m,children:"Next"})]})})]})})};var R=n(14960),H=n(82177),L=n.n(H),T=n(73536),W=n(56332),D=n(23365),V=n(38885),Z=n(34895),$=n(5174);let q=e=>{let{data:s,onBack:n}=e,t=(0,W._J)(),r=(0,k.jL)(),d=(0,l.useRouter)(),i=(null==t?void 0:t.chainId)||"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.azJ,{className:u().row,children:(0,a.jsxs)(h.xA9,{container:!0,spacing:3,children:[(0,a.jsx)(V.A,{name:"Network",value:(0,a.jsx)(R.A,{chainId:null==t?void 0:t.chainId,inline:!0})}),(0,a.jsx)(V.A,{name:"Name",value:(0,a.jsx)(h.o5u,{children:s.name})}),(0,a.jsx)(V.A,{name:"Signers",value:(0,a.jsx)(h.azJ,{className:L().ownersArray,children:s.owners.map((e,s)=>(0,a.jsx)(T.A,{address:e.address,name:e.name||e.ens,shortAddress:!1,showPrefix:!1,showName:!0,hasExplorer:!0,showCopyButton:!0},s))})}),(0,a.jsx)(V.A,{name:"Threshold",value:(0,a.jsxs)(h.o5u,{children:[s.threshold," out of ",s.owners.length," signer",(0,$.Tz)(s.owners)]})})]})}),(0,a.jsx)(h.cGx,{}),(0,a.jsx)(h.azJ,{className:u().row,children:(0,a.jsxs)(h.azJ,{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3,children:[(0,a.jsx)(h.$nd,{variant:"outlined",size:"small",onClick:()=>{n(s)},startIcon:(0,a.jsx)(_.A,{fontSize:"small"}),children:"Back"}),(0,a.jsx)(h.$nd,{onClick:()=>{let e=s.name,n=s.address;for(let{address:a,name:t,ens:l}of(r((0,N.f3)({safe:{...D.pn,address:{value:n,name:e},threshold:s.threshold,owners:s.owners.map(e=>({value:e.address,name:e.name||e.ens})),chainId:i}})),r((0,Z.ds)({chainIds:[i],address:n,name:e})),s.owners)){let e=t||l;e&&r((0,Z.ds)({chainIds:[i],address:a,name:e}))}(0,o.sx)({...o.rR.OWNERS,label:s.owners.length}),(0,o.sx)({...o.rR.THRESHOLD,label:s.threshold}),(0,o.sx)({...o.kg.OPEN_SAFE,label:o.lN.after_add}),d.push({pathname:C.S.home,query:{safe:"".concat(null==t?void 0:t.shortName,":").concat(n)}})},variant:"contained",size:"stretched",children:"Add"})]})})]})},G=[{title:"Choose address, network and a name",subtitle:"Paste the address of the Safe Account you want to add, select the network and choose a name.",render:(e,s,n,t)=>(0,a.jsx)(O,{onSubmit:s,onBack:n,data:e,setStep:t})},{title:"Signers and confirmations",subtitle:"Optional: Provide a name for each signer.",render:(e,s,n,t)=>(0,a.jsx)(F,{onSubmit:s,onBack:n,data:e,setStep:t})},{title:"Review",subtitle:"Confirm adding Safe Account to your Watchlist",render:(e,s,n,t)=>(0,a.jsx)(q,{onSubmit:s,onBack:n,data:e,setStep:t})}],X={threshold:-1,owners:[],address:"",name:""},U=e=>{let{initialData:s}=e,n=(0,l.useRouter)(),t=null!=s?s:X;return(0,a.jsx)(i.mcf,{"data-testid":"load-safe-form",children:(0,a.jsxs)(i.xA9,{container:!0,columnSpacing:3,sx:{mt:[2,null,7],justifyContent:"center"},children:[(0,a.jsx)(i.xA9,{item:!0,xs:12,md:10,lg:8,children:(0,a.jsx)(i.o5u,{variant:"h2",sx:{pb:2},children:"Add existing Safe Account"})}),(0,a.jsx)(i.xA9,{item:!0,xs:12,md:10,lg:8,sx:{order:[1,null,0]},children:(0,a.jsx)(c.m,{initialData:t,onClose:()=>{n.push(C.S.welcome.index)},steps:G,eventCategory:o.y},t.address)})]})})};var K=n(11100);let Y=()=>{let{address:e=""}=(0,l.useRouter)().query,s=Array.isArray(e)?e[0]:e;return(0,a.jsxs)("main",{children:[(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:"".concat(K.Az," – Add Safe Account")})}),s?(0,a.jsx)(U,{initialData:{...X,address:s}}):(0,a.jsx)(U,{initialData:X})]})}},83392:e=>{e.exports={unknownAddress:"styles_unknownAddress__BH1i2"}},36673:e=>{e.exports={card:"styles_card__n9cqN",header:"styles_header__QeZM4",step:"styles_step__R3EWt",content:"styles_content__wZRTX",actions:"styles_actions__nsEiB",progress:"styles_progress__byfBc"}},3107:e=>{e.exports={helper:"styles_helper__VddZk"}},82177:e=>{e.exports={ownersArray:"styles_ownersArray__Lwugg",strikethrough:"styles_strikethrough__dsfcO",errorMessage:"styles_errorMessage__EgiJf",networkFee:"styles_networkFee__s25eL",networkFeeInline:"styles_networkFeeInline__o4u72"}},55122:e=>{e.exports={card:"styles_card__uoWK3",select:"styles_select__P_k1Z",networkSelect:"styles_networkSelect__R8qLL"}},50704:e=>{e.exports={row:"styles_row__UGXjL"}}},e=>{var s=s=>e(e.s=s);e.O(0,[636,6593,8792],()=>s(3572)),_N_E=e.O()}]);
//# sourceMappingURL=load-6892fb91bb8436f5.js.map