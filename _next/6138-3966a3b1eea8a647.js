(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6138],{35465:function(e){e.exports={drop_per_event:[{drop_type:"V1ToV2",id:1,points:"500",maxpoints:null},{drop_type:"Mint",id:5,points:"1000",maxpoints:null},{drop_type:"spin_1",id:7,points:"1",maxpoints:"3"},{drop_type:"spin_2",id:8,points:"3",maxpoints:"8"},{drop_type:"spin_3",id:10,points:"25",maxpoints:"50"},{drop_type:"Referrer",id:4,points:"100",maxpoints:null},{drop_type:"Referral",id:3,points:"10",maxpoints:null},{drop_type:"TestnetLogin",id:6,points:"500",maxpoints:"500"},{drop_type:"Leverage",id:14,points:"1",maxpoints:"10"},{drop_type:"DepositPool",id:15,points:"10",maxpoints:"100"},{drop_type:"DepositVault",id:13,points:"10",maxpoints:"100"},{drop_type:"LentPerDollar",id:2,points:"0.01",maxpoints:null}],drop_per_event_aggregate:{aggregate:{count:12}}}},38425:function(e,t,r){"use strict";r.d(t,{L8:function(){return b},d8:function(){return N},oy:function(){return v},$E:function(){return m},YF:function(){return D},Er:function(){return U},sV:function(){return R},W_:function(){return P},Fe:function(){return w},IC:function(){return S},r$:function(){return C},rR:function(){return E},K9:function(){return x},C8:function(){return _},Y8:function(){return I},z7:function(){return A},LQ:function(){return L},X8:function(){return T}});var a=r(92173);class o extends Error{constructor(e,t){super(t),this.name=e}}var n=r(19813);let s=r(83822),i="fXQudAjFSQCVoSJCrBiFisskVpPkYo1u",l=()=>new Promise(async(e,t)=>{let r=(0,n.M2)(Number("1000000000"));sessionStorage.removeItem("readAccessToken");try{let t={iat:(0,n.Ov)(),"https://hasura.io/jwt/claims":{"x-hasura-default-role":"read","x-hasura-allowed-roles":["read"]},exp:r},a=s.sign(t,i,{algorithm:"HS256"});sessionStorage.setItem("readAccessToken",a),e(a)}catch(e){console.log("[JWT] [clearAndGenerateAndSetNewReadJWT] error",e),t(e)}}),c=()=>{let e=(0,n.uv)(4*Number("30")),t={iat:(0,n.Ov)(),"https://hasura.io/jwt/claims":{"x-hasura-default-role":"write","x-hasura-allowed-roles":["write"]},exp:e};return s.sign(t,i,{algorithm:"HS256"})},u=()=>new Promise(async(e,t)=>{let r=(0,n.uv)(Number("30"));sessionStorage.removeItem("writeAccessToken");try{let t={iat:(0,n.Ov)(),"https://hasura.io/jwt/claims":{"x-hasura-default-role":"write","x-hasura-allowed-roles":["write"]},exp:r},a=s.sign(t,i,{algorithm:"HS256"});sessionStorage.setItem("writeAccessToken",a),e(a)}catch(e){console.log("[JWT] [clearAndGenerateAndSetNewWriteJWT] error",e),t(e)}}),p=async()=>new Promise(async(e,t)=>{let r=sessionStorage.getItem("readAccessToken");if(r)try{s.verify(r,i,{algorithms:["HS256"]}),e(r)}catch(t){console.log("[JWT] Read JWT expired, Creating new Read JWT with expiration time - ".concat("1000000000"," mins"),t),e(await l())}else console.log("[JWT] Creating new Read JWT with expiration time - ".concat("1000000000"," mins")),e(await l())}),d=async()=>new Promise(async(e,t)=>{let r=sessionStorage.getItem("writeAccessToken");if(r)try{let t=s.verify(r,i,{algorithms:["HS256"]});console.log("[JWT] Write JWT still valid, will expire at - ".concat(new Date(1e3*t.exp))),e(r)}catch(t){console.log("[JWT] Write JWT expired, Creating new Write JWT with expiration time - ".concat("30"," secs"),t),e(await u())}else console.log("[JWT] Creating new Write JWT with expiration time - ".concat("30"," secs")),e(await u())});var f=r(35465),h=r.n(f),g=r(1588),y=r(51872);let w=()=>async()=>{try{if(sessionStorage.getItem("uniqueUsers"))return JSON.parse(sessionStorage.getItem("uniqueUsers"));{let e=await a.Z.get("".concat("https://api.oliveapp.finance","/v2/t/users")),t=e.data.count;return 200===e.status&&sessionStorage.setItem("uniqueUsers",JSON.stringify(t)),t}}catch(e){throw console.error("fetchUniqueUsers API_CALLED_FAILED Error:",e),e}},m=e=>async()=>{let t="".concat("https://api.oliveapp.finance","/v3/leaderboard");(0,g.UZ)(e)||(t+="?user=".concat(e));try{return(await a.Z.get(t)).data.leaders}catch(e){throw console.error("fetchUniqueUsers API_CALLED_FAILED Error:",e),e}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return async()=>{let r="".concat("https://h.oliveapp.finance","/api/rest/v2/drules/limit/").concat(e,"/offset/").concat(t);try{let e=await p();return(await a.Z.get(r,{headers:{Authorization:"Bearer ".concat(e)}})).data.drop_per_event}catch(e){return console.error("fetchDropsRules API_CALLED_FAILED Error:",e),h().drop_per_event}}},_=async e=>{if((0,g.UZ)(e))throw Error("Invalid user address");try{var t,r,o,n,s,i;let l=await p(),c=await a.Z.post("".concat("https://h.oliveapp.finance","/api/rest/v2/drops/total/"),{user:e},{headers:{Authorization:"Bearer ".concat(l)}}),u=null===(o=c.data.mint)||void 0===o?void 0:null===(r=o.aggregate)||void 0===r?void 0:null===(t=r.sum)||void 0===t?void 0:t.points,d=null===(i=c.data.total)||void 0===i?void 0:null===(s=i.aggregate)||void 0===s?void 0:null===(n=s.sum)||void 0===n?void 0:n.points;return{mintPoints:u,totalPoints:d}}catch(e){throw console.error("getTotalDrops API_CALLED_FAILED Error:",e),e}},D=e=>async()=>{if(console.log("friendsReferralData fetchNumberOfReferralsByCode",e),(0,g.UZ)(e))throw Error("Invalid referral code");let t="".concat("https://h.oliveapp.finance","/api/rest/v2/ref/").concat(e);try{var r,o;let e=await p(),n=await a.Z.get(t,{headers:{Authorization:"Bearer ".concat(e)}});return null==n?void 0:null===(o=n.data.referrals_aggregate)||void 0===o?void 0:null===(r=o.aggregate)||void 0===r?void 0:r.count}catch(e){throw console.error("fetchNumberOfReferralsByCode API_CALLED_FAILED Error:",e),e}},A=async(e,t,r,o,n)=>{if((0,g.UZ)(e))throw Error("Invalid user address");let s={user:e,drop_event:t,points:r.toString(),time_in_epoch:o};try{let e=await d();console.log("writeJwtToken",e);let t=await a.Z.post("".concat("https://h.oliveapp.finance","/api/rest/v2/drop/"),s,{headers:{Authorization:"Bearer ".concat(e)}});if(1===t.data.insert_drop_history.affected_rows)return!0;return!1}catch(e){throw console.error("postDropsHistory API_CALLED_FAILED Error:",e),e}},E=async(e,t,r)=>{if((0,g.UZ)(e))throw Error("Invalid user address");try{let o=await p();return(await a.Z.post("".concat("https://h.oliveapp.finance","/api/rest/v2/total/spins"),{user:e,t0:t,t1:r},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}})).data.aggregate.total.count}catch(e){throw console.error("fetchUserTotalSpinsCountData API_CALLED_FAILED Error:",e),e}},U=()=>async()=>{try{if(sessionStorage.getItem("drops"))return JSON.parse(sessionStorage.getItem("drops"));{let e=await p(),t=await a.Z.get("".concat("https://api.oliveapp.finance","/v2/t/drops"),{headers:{Authorization:"Bearer ".concat(e)}}),r=t.data.total;return 200===t.status&&sessionStorage.setItem("drops",JSON.stringify(r)),r}}catch(e){throw new o("fetchUniqueUsers API_CALLED_FAILED",e.message),console.error("fetchUniqueUsers API_CALLED_FAILED Error:",e),e}},S=async e=>{if((0,g.UZ)(e))throw Error("Invalid user address");let t="".concat("https://h.oliveapp.finance","/api/rest/v2/points/user/").concat(e);try{let e=await p();return(await a.Z.get(t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).data.Points_aggregate.aggregate.sum}catch(e){throw console.error("fetchUserTotalSpinsCountData API_CALLED_FAILED Error:",e),e}},T=async()=>{for(let e of Object.keys(localStorage).filter(e=>e.startsWith("trxn_"))){let t=JSON.parse(localStorage.getItem(e));console.log("dbg | retry transaction",t),localStorage.removeItem(e),t.retries<20&&I(t)}},I=async e=>{let{type:t,hash:r,user_address:o,amount:n=null,chain_id:s,tx_status:i,vault:l,retries:u=0}=e,p=(0,y.Z)(),d={type:t,timestamp:new Date().getTime(),amount:String(n),tx_hash:r,user_address:o,uuid:p,chain_id:s,tx_status:i,vault:l,block_number:null},f=c();try{let e=await a.Z.post("".concat("https://h.oliveapp.finance","/api/rest/v3/trxn"),d,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}});return console.log("dbg | create transaction response",e),e.data}catch(e){"ECONNREFUSED"===e.code||"ECONNABORTED"===e.code||"ERR_NETWORK"===e.code?d.retries=u:d.retries=u+1,localStorage.setItem("trxn_".concat(p),JSON.stringify(d)),console.error("dbg | create transaction Error:",e.code)}},C=async e=>{if((0,g.UZ)(e))throw Error("Invalid user address");let t="".concat("https://api.oliveapp.finance","/steps?user=").concat(e);try{return(await a.Z.get(t,{})).data.steps}catch(e){throw console.error("fetchUserSpins API_CALLED_FAILED Error:",e),e}},R=async e=>{let t="".concat("https://api.oliveapp.finance","/referral?user=").concat(e);try{if(sessionStorage.getItem("referralCode_".concat(e.toLowerCase())))return JSON.parse(sessionStorage.getItem("referralCode_".concat(e.toLowerCase())));{let r=await a.Z.get(t,{});return 200===r.status&&sessionStorage.setItem("referralCode_".concat(e.toLowerCase()),JSON.stringify(r.data)),r.data}}catch(e){throw console.error("fetch Refferral Code Error:",e),e}},b=async e=>{let t="".concat("https://api.oliveapp.finance","/referral/check?code=").concat(e);try{return(await a.Z.get(t,{})).data}catch(e){throw console.error("fetch Refferral Code Error:",e),e}},L=async(e,t)=>{try{return(await a.Z.post("".concat("https://api.oliveapp.finance","/referral"),{account_address:e,referred_by:t},{})).data}catch(e){throw console.error("fetch Refferral Code Error:",e),e}},x=async e=>{let t="".concat("https://api.oliveapp.finance","/squad/transactions?code=").concat(e);try{return(await a.Z.get(t,{})).data}catch(e){throw console.error("dbg | fetch Refferral Code Error:",e),e}},P=async e=>{let t="".concat("https://api.oliveapp.finance","/referral/tvl?code=").concat(e);try{return(await a.Z.get(t,{})).data}catch(e){throw console.error("fetch Refferral Code Error:",e),e}},N=()=>async()=>{try{return(await a.Z.get("https://drelay.polysynth.com/v1/prices")).data.prices}catch(e){throw console.error("fetchBidsPrices API_CALLED_FAILED Error:",e),e}}},96189:function(e,t,r){"use strict";r.d(t,{$F:function(){return A},Dk:function(){return l},Dt:function(){return k},Ep:function(){return B},H$:function(){return v},Jn:function(){return O},KT:function(){return p},Qu:function(){return V},R1:function(){return R},RZ:function(){return j},SQ:function(){return u},U0:function(){return I},Vi:function(){return q},Xo:function(){return H},Yv:function(){return U},aM:function(){return Q},aT:function(){return z},at:function(){return Z},c0:function(){return F},eD:function(){return $},hQ:function(){return T},iS:function(){return b},ly:function(){return g},m6:function(){return w},px:function(){return D},sj:function(){return E},t_:function(){return n},wo:function(){return d},xG:function(){return W},y_:function(){return c},zV:function(){return J},zt:function(){return o},zy:function(){return S}});let a=(0,r(39730).oM)({name:"global",initialState:{totalUniqueDepositors:0,totalOlivePoints:null,totalUniqueDiscordUsers:null,totalUniqueTwitterUsers:null,dropsRules:null,spinResult:null,spinJackpot:!1,userVerificationData:null,connectedAddress:null,temporarilyConnectedAddress:null,userUnverifiedErrorMessage:null,totalDropsPoints:0,totalNumberOfReferralsByCode:0,myReferralData:{},friendsReferralData:null,reloadPage:0,inviteCodeDetails:null,spinsLeft:0,timeBeforeNextSpin:0,totalNumberOfSpins:10,totalVaultBalances:null,totalUserVaultBalances:null,totalUserWalletBalances:null,totalUserPoints:null,totalUserSpins:null,totalUserSteps:null,assetPrices:null,rewardsRates:null,assetRewardsMapping:null,emissionRate:null,leaders:null,isMobile:!1,dwModal:null},reducers:{setTotalUniqueDepositors:(e,t)=>{e.totalUniqueDepositors=t.payload},setTotalOlivePoints:(e,t)=>{e.totalOlivePoints=t.payload},setTotalUniqueDiscordUsers:(e,t)=>{e.totalUniqueDiscordUsers=t.payload},setTotalUniqueTwitterUsers:(e,t)=>{e.totalUniqueTwitterUsers=t.payload},setDropsRules(e,t){e.dropsRules=t.payload},setSpinResult(e,t){e.spinResult=t.payload},setSpinJackpot(e,t){e.spinJackpot=t.payload},setUserVerificationData(e,t){e.userVerificationData=t.payload},setConnectedAddress(e,t){e.connectedAddress=t.payload},setTemporarilyConnectedAddress(e,t){e.temporarilyConnectedAddress=t.payload},setUserUnverifiedErrorMessage(e,t){e.userUnverifiedErrorMessage=t.payload},setTotalDropsPoints(e,t){e.totalDropsPoints=t.payload},setTotalNumberOfReferralsByCode(e,t){e.totalNumberOfReferralsByCode=t.payload},setMyReferralData(e,t){e.myReferralData=t.payload},setFriendsReferralData(e,t){e.friendsReferralData=t.payload},setReloadPage(e,t){e.reloadPage=t.payload},setInviteCodeDetails(e,t){e.inviteCodeDetails=t.payload},setSpinsLeft(e,t){e.spinsLeft=t.payload},setTimeBeforeNextSpin:(e,t)=>{e.timeBeforeNextSpin=t.payload},setTotalNumberOfSpins:(e,t)=>{e.totalNumberOfSpins=t.payload},setTotalVaultBalances:(e,t)=>{e.totalVaultBalances=t.payload},setTotalUserVaultBalances:(e,t)=>{e.totalUserVaultBalances=t.payload},setTotalUserWalletBalances:(e,t)=>{e.totalUserWalletBalances=t.payload},setTotalUserPoints:(e,t)=>{e.totalUserPoints=t.payload},setTotalUserSpins:(e,t)=>{e.totalUserSpins=t.payload},setTotalUserSteps:(e,t)=>{e.totalUserSteps=t.payload},setAssetPrices:(e,t)=>{e.assetPrices=t.payload},setRewardsRates:(e,t)=>{e.rewardsRates=t.payload},setAssetRewardsMapping:(e,t)=>{e.assetRewardsMapping=t.payload},setEmissionRate:(e,t)=>{e.emissionRate=t.payload},setLeaders:(e,t)=>{e.leaders=t.payload},setIsMobile:(e,t)=>{e.isMobile=t.payload},setDWModal:(e,t)=>{e.dwModal=t.payload}}}),{setTotalUniqueDepositors:o,setTotalOlivePoints:n,setTotalUniqueDiscordUsers:s,setTotalUniqueTwitterUsers:i,setDropsRules:l,setSpinResult:c,setSpinJackpot:u,setUserVerificationData:p,setConnectedAddress:d,setTemporarilyConnectedAddress:f,setUserUnverifiedErrorMessage:h,setTotalDropsPoints:g,setTotalNumberOfReferralsByCode:y,setMyReferralData:w,setFriendsReferralData:m,setReloadPage:v,setInviteCodeDetails:_,setSpinsLeft:D,setTimeBeforeNextSpin:A,setTotalNumberOfSpins:E,setTotalVaultBalances:U,setTotalUserVaultBalances:S,setTotalUserWalletBalances:T,setTotalUserPoints:I,setTotalUserSpins:C,setTotalUserSteps:R,setAssetPrices:b,setRewardsRates:L,setAssetRewardsMapping:x,setEmissionRate:P,setLeaders:N,setIsMobile:B,setDWModal:M}=a.actions,J=e=>e.global.totalUniqueDepositors,Z=e=>e.global.dropsRules,W=e=>e.global.spinResult,O=e=>e.global.spinJackpot,k=e=>e.global.connectedAddress,F=e=>e.global.reloadPage,V=e=>e.global.spinsLeft,q=e=>e.global.totalVaultBalances,z=e=>e.global.totalUserVaultBalances,H=e=>e.global.totalUserWalletBalances,j=e=>e.global.totalUserPoints,Q=e=>e.global.assetPrices,$=e=>e.global.isMobile;t.ZP=a.reducer},19813:function(e,t,r){"use strict";r.d(t,{M2:function(){return p},Ov:function(){return u},_I:function(){return s},pw:function(){return f},rZ:function(){return c},uv:function(){return d},w$:function(){return l},ys:function(){return i},zf:function(){return n}});var a=r(77778);let o=(e,t)=>{if(!e)return 0;let r=new a.Z(10).exponentiatedBy(t);return Number(new a.Z(e.toString()).dividedBy(r))},n=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"before",a=["","K","M","B","T"],o=Number(e),n=0,s=!1;if(0==o)return"-";for(o<0&&(s=!0,o=Math.abs(o));o>=1e3&&n<a.length-1;)o/=1e3,n++;let i=Math.round(100*o)/100,l=s?"-".concat(i):"".concat(i);return"before"===r?"".concat(t).concat(l).concat(a[n]):"".concat(l).concat(a[n]," ").concat(t)};function s(e,t){return Number(e).toFixed(t)}function i(e){if(!e)return"-";if(e.length<10)return e;let t=e.slice(0,10),r=e.slice(-10);return"".concat(t,"...").concat(r)}function l(e,t,r){return e?o(e,r):t}let c=(e,t)=>{let r=Number(e);return Math.floor(Math.random()*(Number(t)-r+1))+r},u=()=>Math.floor(Date.now()/1e3),p=e=>Math.floor(Date.now()/1e3)+60*e,d=e=>Math.floor(Date.now()/1e3)+e,f=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),h=(e,t,r)=>"".concat(e,"H:").concat(t,"M:").concat(r,"s"),g=()=>{let e;let t=new Date,r=t.getHours();r>=0&&r<8?(e=new Date(t)).setHours(8,0,0,0):r>=8&&r<16?(e=new Date(t)).setHours(16,0,0,0):((e=new Date(t)).setDate(t.getDate()+1),e.setHours(8,0,0,0));let a=e.getTime()-t.getTime();return h(Math.floor(a/36e5),Math.floor(a%36e5/6e4),Math.floor(a%6e4/1e3))};setInterval(function(){let e=g();h(Math.floor(e/36e5),Math.floor(e%36e5/6e4),Math.floor(e%6e4/1e3))},1e3)},1588:function(e,t,r){"use strict";function a(e){return null===e}function o(e){return null==e||""===e||0===e.length}r.d(t,{Ft:function(){return a},UZ:function(){return o}})},49306:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});let a=e=>"https://cdnv1.oliveapp.finance/bank-website/".concat(e)}}]);